<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14.0.1) on Fri Jul 03 03:57:52 CEST 2020 -->
<title>ServerClientListenerThread</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-07-03">
<meta name="description" content="declaration: package: it.polimi.ingsw.network, class: ServerClientListenerThread">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServerClientListenerThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">it.polimi.ingsw.network</a></div>
<h1 title="Class ServerClientListenerThread" class="title">Class ServerClientListenerThread</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">java.lang.Thread
<div class="inheritance">it.polimi.ingsw.network.ServerClientListenerThread</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ServerClientListenerThread</span>
extends java.lang.Thread</pre>
<div class="block">This class is the class for Server and Client communication, it receives client input using socket with classes of the package <a href="objects/package-summary.html"><code>it.polimi.ingsw.network.objects</code></a> and <a href="game/package-summary.html"><code>it.polimi.ingsw.network.game</code></a> and is used to send input to the client.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="ServerClientListenerThread.ClientConnection.html" title="class in it.polimi.ingsw.network">ServerClientListenerThread.ClientConnection</a></span></code></th>
<td class="colLast">
<div class="block">This is a private class which only aim is to check that the client is currently online and is playing the game with ping requests implemented using the NetObject class with a special message to indicate this intention.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h2>Nested classes/interfaces inherited from class&nbsp;java.lang.Thread</h2>
<a id="nested.classes.inherited.from.class.java.lang.Thread">
<!--   -->
</a><code>java.lang.Thread.State, java.lang.Thread.UncaughtExceptionHandler</code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#active">active</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.Socket</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clientSocket">clientSocket</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="ServerClientListenerThread.ClientConnection.html" title="class in it.polimi.ingsw.network">ServerClientListenerThread.ClientConnection</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionListener">connectionListener</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gamePhase">gamePhase</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="RemoteView.html" title="class in it.polimi.ingsw.network">RemoteView</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gameServer">gameServer</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.ObjectInputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#input">input</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="Server.html" title="class in it.polimi.ingsw.network">Server</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lobbyServer">lobbyServer</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.ObjectOutputStream</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#output">output</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#playerName">playerName</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#playerNameLock">playerNameLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#scopeLock">scopeLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#stateLock">stateLock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#thread_number">thread_number</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#verifyClient">verifyClient</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;java.lang.Thread</h3>
<a id="fields.inherited.from.class.java.lang.Thread">
<!--   -->
</a><code>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colSecond" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">ServerClientListenerThread</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.net.Socket,it.polimi.ingsw.network.Server)">ServerClientListenerThread</a></span>&#8203;(java.net.Socket&nbsp;clientSocket,
<a href="Server.html" title="class in it.polimi.ingsw.network">Server</a>&nbsp;server)</code></th>
<td class="colLast">
<div class="block">The constructor initialize a listener for client's messages in the setup stage.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeSocketAndTerminate()">closeSocketAndTerminate</a></span>()</code></th>
<td class="colLast">
<div class="block">It closes the socket and calls <code>setActive(false);</code>.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disconnect()">disconnect</a></span>()</code></th>
<td class="colLast">
<div class="block">This method disconnects the user.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fatalError(java.lang.String)">fatalError</a></span>&#8203;(java.lang.String&nbsp;info)</code></th>
<td class="colLast">
<div class="block">This method is called when a programming error occurred, it sends a message to the client to notify it that this game has crashed and throws an AssertionError on the server.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGamePhase()">getGamePhase</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets game phase.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPlayerName()">getPlayerName</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets player name.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyDisconnection()">notifyDisconnection</a></span>()</code></th>
<td class="colLast">
<div class="block">This method calls the remote view method which handles the disconnection of the client.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseColorInput(it.polimi.ingsw.network.objects.NetColorPreparation)">parseColorInput</a></span>&#8203;(<a href="objects/NetColorPreparation.html" title="class in it.polimi.ingsw.network.objects">NetColorPreparation</a>&nbsp;colorMessage)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client in the color choice phase, if the client has sent a color of the game it calls the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseDivinityInput(it.polimi.ingsw.network.objects.NetDivinityChoice)">parseDivinityInput</a></span>&#8203;(<a href="objects/NetDivinityChoice.html" title="class in it.polimi.ingsw.network.objects">NetDivinityChoice</a>&nbsp;divinityMessage)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client in the gods phase, in this phase the client can choose a god, game gods or the starter (or also disconnect).</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseGameSetupInput(it.polimi.ingsw.network.objects.NetGameSetup)">parseGameSetupInput</a></span>&#8203;(<a href="objects/NetGameSetup.html" title="class in it.polimi.ingsw.network.objects">NetGameSetup</a>&nbsp;gameSetupMessage)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client in the game setup phase, in this phase the player can send its workers position on the game table or disconnect, if the message id well formed it is sent to the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseGamingInput(it.polimi.ingsw.network.objects.NetGaming)">parseGamingInput</a></span>&#8203;(<a href="objects/NetGaming.html" title="class in it.polimi.ingsw.network.objects">NetGaming</a>&nbsp;gamingMsg)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client in the gaming phase, in this phase a player can move, build or disconnect, if the message is well formed it is sent to the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseLobbyInput(it.polimi.ingsw.network.objects.NetLobbyPreparation)">parseLobbyInput</a></span>&#8203;(<a href="objects/NetLobbyPreparation.html" title="class in it.polimi.ingsw.network.objects">NetLobbyPreparation</a>&nbsp;lobbyMessage)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client in the lobby phase of the game, here the client can only disconnect from the lobby.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#parseSetupInput(it.polimi.ingsw.network.objects.NetSetup)">parseSetupInput</a></span>&#8203;(<a href="objects/NetSetup.html" title="class in it.polimi.ingsw.network.objects">NetSetup</a>&nbsp;setupMessage)</code></th>
<td class="colLast">
<div class="block">This function parses the input that arrives from the client before being inside a lobby, it calls methods on the server to add the player on a lobby, if there isn't a lobby it catches the FirstPlayerException and asks to the player the number of player that the game should have because he is the first and should create a lobby.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#run()">run</a></span>()</code></th>
<td class="colLast">
<div class="block">Overrides the Thread run method, it listens for <a href="objects/NetObject.html" title="class in it.polimi.ingsw.network.objects"><code>NetObject</code></a> objects on the socket and analyze with the current phase.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendGeneralError()">sendGeneralError</a></span>()</code></th>
<td class="colLast">
<div class="block">It sends a general error to the client to make it know that an unknown error occurred.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendMessage(it.polimi.ingsw.network.objects.NetObject)">sendMessage</a></span>&#8203;(<a href="objects/NetObject.html" title="class in it.polimi.ingsw.network.objects">NetObject</a>&nbsp;object)</code></th>
<td class="colLast">
<div class="block">It writes the message on the output stream and send it to the client, after sending the message it is called a <code>output.reset()</code> method to reset the output stream.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setActive(boolean)">setActive</a></span>&#8203;(boolean&nbsp;active)</code></th>
<td class="colLast">
<div class="block">It sets the current thread to <code>active</code> value, if it is set to false the thread is going to terminate, instead the thread is going to continue its normal work.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setGamePhase(it.polimi.ingsw.network.NetworkPhase)">setGamePhase</a></span>&#8203;(<a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a>&nbsp;gamePhase)</code></th>
<td class="colLast">
<div class="block">It sets the network game phase.</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setGameServer(it.polimi.ingsw.network.RemoteView)">setGameServer</a></span>&#8203;(<a href="RemoteView.html" title="class in it.polimi.ingsw.network">RemoteView</a>&nbsp;gameServer)</code></th>
<td class="colLast">
<div class="block">It sets the remote view connected to this client.</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPlayerName(java.lang.String)">setPlayerName</a></span>&#8203;(java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">It sets the player's name.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Thread</h3>
<a id="methods.inherited.from.class.java.lang.Thread">
<!--   -->
</a><code>activeCount, checkAccess, clone, countStackFrames, currentThread, dumpStack, enumerate, getAllStackTraces, getContextClassLoader, getDefaultUncaughtExceptionHandler, getId, getName, getPriority, getStackTrace, getState, getThreadGroup, getUncaughtExceptionHandler, holdsLock, interrupt, interrupted, isAlive, isDaemon, isInterrupted, join, join, join, onSpinWait, resume, setContextClassLoader, setDaemon, setDefaultUncaughtExceptionHandler, setName, setPriority, setUncaughtExceptionHandler, sleep, sleep, start, stop, suspend, toString, yield</code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="lobbyServer">lobbyServer</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="Server.html" title="class in it.polimi.ingsw.network">Server</a></span>&nbsp;<span class="memberName">lobbyServer</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="gameServer">gameServer</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="RemoteView.html" title="class in it.polimi.ingsw.network">RemoteView</a></span>&nbsp;<span class="memberName">gameServer</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="gamePhase">gamePhase</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a></span>&nbsp;<span class="memberName">gamePhase</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="active">active</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">active</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="verifyClient">verifyClient</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">verifyClient</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="playerName">playerName</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">playerName</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectionListener">connectionListener</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType"><a href="ServerClientListenerThread.ClientConnection.html" title="class in it.polimi.ingsw.network">ServerClientListenerThread.ClientConnection</a></span>&nbsp;<span class="memberName">connectionListener</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="clientSocket">clientSocket</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.net.Socket</span>&nbsp;<span class="memberName">clientSocket</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="input">input</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.io.ObjectInputStream</span>&nbsp;<span class="memberName">input</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="output">output</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.io.ObjectOutputStream</span>&nbsp;<span class="memberName">output</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="scopeLock">scopeLock</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.Object</span>&nbsp;<span class="memberName">scopeLock</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="stateLock">stateLock</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.Object</span>&nbsp;<span class="memberName">stateLock</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="playerNameLock">playerNameLock</a></h3>
<div class="memberSignature"><span class="modifiers">private final</span>&nbsp;<span class="returnType">java.lang.Object</span>&nbsp;<span class="memberName">playerNameLock</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="thread_number">thread_number</a></h3>
<div class="memberSignature"><span class="modifiers">private static</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">thread_number</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(java.net.Socket,it.polimi.ingsw.network.Server)">ServerClientListenerThread</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">ServerClientListenerThread</span>&#8203;(<span class="arguments">java.net.Socket&nbsp;clientSocket,
<a href="Server.html" title="class in it.polimi.ingsw.network">Server</a>&nbsp;server)</span>
                           throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">The constructor initialize a listener for client's messages in the setup stage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>server</code> - This parameter is the reference to the server object</dd>
<dd><code>clientSocket</code> - This parameter is the client's socket which this object listen</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the socket can't be accessed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;()">ServerClientListenerThread</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="memberName">ServerClientListenerThread</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="run()">run</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">run</span>()</div>
<div class="block">Overrides the Thread run method, it listens for <a href="objects/NetObject.html" title="class in it.polimi.ingsw.network.objects"><code>NetObject</code></a> objects on the socket and analyze with the current phase. If the message is dynamically (meaning that its dynamic type is the type needed for the current phase) it passes it to the parsing method for that phase.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>run</code>&nbsp;in class&nbsp;<code>java.lang.Thread</code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseSetupInput(it.polimi.ingsw.network.objects.NetSetup)">parseSetupInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseSetupInput</span>&#8203;(<span class="arguments"><a href="objects/NetSetup.html" title="class in it.polimi.ingsw.network.objects">NetSetup</a>&nbsp;setupMessage)</span></div>
<div class="block">This function parses the input that arrives from the client before being inside a lobby, it calls methods on the server to add the player on a lobby, if there isn't a lobby it catches the FirstPlayerException and asks to the player the number of player that the game should have because he is the first and should create a lobby.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>setupMessage</code> - is the message sent by the client</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.AssertionError</code> - if this object has passed wrong parameters to the server functions</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseLobbyInput(it.polimi.ingsw.network.objects.NetLobbyPreparation)">parseLobbyInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseLobbyInput</span>&#8203;(<span class="arguments"><a href="objects/NetLobbyPreparation.html" title="class in it.polimi.ingsw.network.objects">NetLobbyPreparation</a>&nbsp;lobbyMessage)</span></div>
<div class="block">This function parses the input that arrives from the client in the lobby phase of the game, here the client can only disconnect from the lobby.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lobbyMessage</code> - is the message sent by the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseColorInput(it.polimi.ingsw.network.objects.NetColorPreparation)">parseColorInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseColorInput</span>&#8203;(<span class="arguments"><a href="objects/NetColorPreparation.html" title="class in it.polimi.ingsw.network.objects">NetColorPreparation</a>&nbsp;colorMessage)</span></div>
<div class="block">This function parses the input that arrives from the client in the color choice phase, if the client has sent a color of the game it calls the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>colorMessage</code> - is the message sent by the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseDivinityInput(it.polimi.ingsw.network.objects.NetDivinityChoice)">parseDivinityInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseDivinityInput</span>&#8203;(<span class="arguments"><a href="objects/NetDivinityChoice.html" title="class in it.polimi.ingsw.network.objects">NetDivinityChoice</a>&nbsp;divinityMessage)</span></div>
<div class="block">This function parses the input that arrives from the client in the gods phase, in this phase the client can choose a god, game gods or the starter (or also disconnect). In all cases if the message is correctly formed it is sent to the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>divinityMessage</code> - is the message sent by the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseGameSetupInput(it.polimi.ingsw.network.objects.NetGameSetup)">parseGameSetupInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseGameSetupInput</span>&#8203;(<span class="arguments"><a href="objects/NetGameSetup.html" title="class in it.polimi.ingsw.network.objects">NetGameSetup</a>&nbsp;gameSetupMessage)</span></div>
<div class="block">This function parses the input that arrives from the client in the game setup phase, in this phase the player can send its workers position on the game table or disconnect, if the message id well formed it is sent to the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gameSetupMessage</code> - is the message sent by the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="parseGamingInput(it.polimi.ingsw.network.objects.NetGaming)">parseGamingInput</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">parseGamingInput</span>&#8203;(<span class="arguments"><a href="objects/NetGaming.html" title="class in it.polimi.ingsw.network.objects">NetGaming</a>&nbsp;gamingMsg)</span></div>
<div class="block">This function parses the input that arrives from the client in the gaming phase, in this phase a player can move, build or disconnect, if the message is well formed it is sent to the <a href="RemoteView.html" title="class in it.polimi.ingsw.network"><code>RemoteView</code></a> handling method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gamingMsg</code> - is the message sent by the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setPlayerName(java.lang.String)">setPlayerName</a></h3>
<div class="memberSignature"><span class="modifiers">private</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setPlayerName</span>&#8203;(<span class="arguments">java.lang.String&nbsp;name)</span></div>
<div class="block">It sets the player's name.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - is player's name</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setGameServer(it.polimi.ingsw.network.RemoteView)">setGameServer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setGameServer</span>&#8203;(<span class="arguments"><a href="RemoteView.html" title="class in it.polimi.ingsw.network">RemoteView</a>&nbsp;gameServer)</span></div>
<div class="block">It sets the remote view connected to this client.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gameServer</code> - is the remote view component of the server which is connected to this client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setActive(boolean)">setActive</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setActive</span>&#8203;(<span class="arguments">boolean&nbsp;active)</span></div>
<div class="block">It sets the current thread to <code>active</code> value, if it is set to false the thread is going to terminate, instead the thread is going to continue its normal work.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>active</code> - true if the thread must be operate, false otherwise</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setGamePhase(it.polimi.ingsw.network.NetworkPhase)">setGamePhase</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setGamePhase</span>&#8203;(<span class="arguments"><a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a>&nbsp;gamePhase)</span></div>
<div class="block">It sets the network game phase.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gamePhase</code> - is the game network phase</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sendMessage(it.polimi.ingsw.network.objects.NetObject)">sendMessage</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">sendMessage</span>&#8203;(<span class="arguments"><a href="objects/NetObject.html" title="class in it.polimi.ingsw.network.objects">NetObject</a>&nbsp;object)</span></div>
<div class="block">It writes the message on the output stream and send it to the client, after sending the message it is called a <code>output.reset()</code> method to reset the output stream.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>object</code> - is the <a href="objects/NetObject.html" title="class in it.polimi.ingsw.network.objects"><code>NetObject</code></a> to send to the client</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sendGeneralError()">sendGeneralError</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">sendGeneralError</span>()</div>
<div class="block">It sends a general error to the client to make it know that an unknown error occurred.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="closeSocketAndTerminate()">closeSocketAndTerminate</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">closeSocketAndTerminate</span>()</div>
<div class="block">It closes the socket and calls <code>setActive(false);</code>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getGamePhase()">getGamePhase</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="NetworkPhase.html" title="enum in it.polimi.ingsw.network">NetworkPhase</a></span>&nbsp;<span class="memberName">getGamePhase</span>()</div>
<div class="block">Gets game phase.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>game phase</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPlayerName()">getPlayerName</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">java.lang.String</span>&nbsp;<span class="memberName">getPlayerName</span>()</div>
<div class="block">Gets player name.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>player name</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="notifyDisconnection()">notifyDisconnection</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">notifyDisconnection</span>()</div>
<div class="block">This method calls the remote view method which handles the disconnection of the client.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fatalError(java.lang.String)">fatalError</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">fatalError</span>&#8203;(<span class="arguments">java.lang.String&nbsp;info)</span></div>
<div class="block">This method is called when a programming error occurred, it sends a message to the client to notify it that this game has crashed and throws an AssertionError on the server.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>info</code> - information about the error</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.AssertionError</code> - always thrown because the server had an error due to incorrect calls to methods</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="disconnect()">disconnect</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">disconnect</span>()</div>
<div class="block">This method disconnects the user.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ServerClientListenerThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
